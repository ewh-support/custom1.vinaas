(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{148:function(n,t,e){"use strict";var o,a=e(98),r=(o=a)&&o.__esModule?o:{default:o};e(154),n.exports={TIMESTAMP:function(){return r.default.firestore.FieldValue.serverTimestamp()}}},158:function(n,t,e){"use strict";var o,a=e(98),r=(o=a)&&o.__esModule?o:{default:o};e(159),e(161),n.exports=function(n){var t=n.name,e=n.config,o=r.default.apps.find(function(n){return n.name_===t}),a=o||r.default.initializeApp(e,t);if(!o){a.firestore?a.firestore().settings({timestampsInSnapshots:!0}):console.warn("firestore has not been imported"),console.log("[FIREBASE-"+t+"] using "+e.projectId),a.auth().onAuthStateChanged(function(n){n&&n.uid?console.log("[FIREBASE-"+t+"] logged in ",{email:n.email,uid:n.uid}):console.log("[FIREBASE-"+t+"] logged out ")})}return Object.freeze({firebase:a,on_auth:function(n){return a.auth().onAuthStateChanged(function(t){var e=t&&t.uid;n(e,t)})},firestore:function(){return a.firestore()},database:function(){return a.database()},storage:function(){return a.storage()},auth:function(){return a.auth()},login_password:function(n){var t=n.email,e=n.password;return a.auth().setPersistence(r.default.auth.Auth.Persistence.LOCAL).then(function(){return console.log("signin",t,e),a.auth().signInWithEmailAndPassword(t,e).then(function(){var n=a.auth().currentUser.uid;return console.log("signed",n),n})})},login_anonymously:function(){return a.auth().signInAnonymously().then(function(){return a.auth().currentUser.uid})},login_token:function(n){var t=n.token;return a.auth().setPersistence(r.default.auth.Auth.Persistence.LOCAL).then(function(){return a.auth().signInWithCustomToken(t).then(function(){return a.auth().currentUser.uid})})},logout:function(){return a.auth().signOut()}})}},60:function(n,t,e){"use strict";var o=r(e(1)),a=r(e(4));function r(n){return n&&n.__esModule?n:{default:n}}e(148);var i=function(){var n=[];return Object.freeze({add:function(t){return n.push(t)},reset:function(){n.forEach(function(n){return n()}),n=[]}})},u=["vi"];n.exports=function(n){var t=n.firebase_config_cms,r=e(158)({name:"cms",config:t}),c=new o.default,s=new i,d=(0,a.default)(200);return c.add("data")(),c.add("route")(),c.add("change")(),c.add("contents")(null,{content_global:{},content_s1:{},content_s2:{},content_s3:{}}),c.add("page")(),r.firestore().collection("pages").onSnapshot(function(n){var t={};n.forEach(function(n){t[n.id]=n.data()}),c.emit("page",{pages:t})}),c.on("route")(function(n){if(null!=n){var t=n.s1||"home",e=u.indexOf(n.s1)>=0,o=e?n.s2||"home":n.s2,a=n.s3;s.reset(),c.emit("page",{route:{s1:e?o:t}}),e?s.add(r.firestore().collection("contents").doc(t).collection("__s2").doc("__global").onSnapshot(function(n){c.emit("contents",{content_global:n.data()||{}})})):(s.add(r.firestore().collection("contents").doc(t).onSnapshot(function(n){c.emit("contents",{content_s1:n.data()||{}})})),s.add(r.firestore().collection("contents").doc("__global").onSnapshot(function(n){c.emit("contents",{content_global:n.data()||{}})}))),o&&s.add(r.firestore().collection("contents").doc(t).collection("__s2").doc(o).onSnapshot(function(n){e?c.emit("contents",{content_s1:n.data()||{}}):c.emit("contents",{content_s2:n.data()||{}})})),a&&e&&s.add(r.firestore().collection("contents").doc(t).collection("__s2").doc(o).collection("__s3").doc(a).onSnapshot(function(n){c.emit("contents",{content_s2:n.data()||{}})}))}}),c.on("contents")(function(n){return c.emit("data",{contents:n})}),c.on("page")(function(n){var t=n||{},e=t.pages,o=(t.route||{}).s1;if(e&&o){var a=e[o];c.emit("data",{page:a})}}),c.on("data")(function(n){d.do(function(){c.emit("change",n)})}),Object.freeze({emit_route:function(n){return c.emit("route",n)},on_change:function(n){return c.on("change")(n)}})}}}]);